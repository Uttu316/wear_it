<div class="mb-4">
    <div class="page-header  mb-0">
        <h4 class="page-title">All User</h4>
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a routerLink="/dashboard" >Home</a></li>
            <li class="breadcrumb-item active" aria-current="page">All User</li>
        </ol>
    </div>
</div>
<div class="row">
    <div class="col-md-12">
        <div class="card">
            <div class="card-header"> 
                <div class="card-title"><img src="assets/images/icon/information.png">&nbsp;All User</div>
                 <div class="card-options" > 
                    <!-- <a class="total-record-btn" routerLink="/color/add-color">Total Record : {{tabledata['recordsTotal']}}</a> -->
                </div>
                 <div class="card-options" > 
                    <a class="add-btn" routerLink="/manage-user/add-user"><img src="assets/images/icon/plus.png">&nbsp;Add New User</a>
                </div> 
            </div>

           
            <div class="card-body">
               <!--  <div class="form-group">
                 
                    <div class="row gutters-xs"> 
                        <div class="col-sm-4"> 
                            <input type="text" class="form-control" placeholder="Search for prduct title..." (keyup)=onKeySearchTitle($event.target.value)>
                        </div>

                        <div class="col-sm-4"> 
                                <div class="form-group">
                                
                                    <select class="form-control " (change)=onKeySearchcategory($event.target.value)>
                                       <option value='' [selected] = "hcategory == ''" disabled>--Select Category--</option>
                                      <option *ngFor="let all_category of all_categorys" [value]="all_category.id">{{all_category.cat_name}}</option> 
                                    </select>
                                    
                                 </div>
                        </div>
                
                    </div>
                </div> -->
                <div class="table-responsive">
                        <table id="example" class="table table-bordered key-buttons text-nowrap" *ngIf="tabledata['tableData']">
                            <thead class="bg-primary text-white">
                                <tr>
                                    <th class="border-bottom-0">S.No</th>
                                    <th class="border-bottom-0">Name</th>
                                    <th class="border-bottom-0">Phone Number</th>
                                    <th class="border-bottom-0">Email</th>
                                    <th class="border-bottom-0">Action</th>
                                          
                                </tr>
                            </thead>
                            
                            <tbody>
                                        <tr *ngFor="let records of data | paginate: { itemsPerPage: 10, currentPage: p }  ; let i = index">
                                            <td>{{ (p - 1) * 50 + i +1 }}</td>
                                            
                                            <td>{{records['name']}}</td>
                                            <td>{{records['phone_number']}}</td>
                                            <td>{{records['email']}}</td>
                                           <td>
                                                <div class="btn-list">
                                                    <button type="button" class="btn btn-icon  btn-info btn-size"  (click)="viewRecord(records['pk'])"><i class="fas fa-binoculars text-white"></i></button>

                                                   

                                                   <!--  
                                                    <button *ngIf="records['status'] == 1" title="Deactive Click Here" type="button" class="btn btn-icon  btn-success btn-size"  (click)="clickAction(records['id'],'0')"><i class="fas fa-check text-white"></i></button>

                                                     <button  *ngIf="records['status'] == 0" title="Active Click Here" type="button" class="btn btn-icon  btn-warning btn-size"  (click)="clickAction(records['id'],'1')" ><i class="fas fa-times text-white"></i></button>

                                                  -->
                                                    
                                                    <button type="button" class="btn btn-icon  btn-primary btn-size"  (click)="editrecord(records['pk'])"><i class="fas fa-edit text-white"></i></button>

                                                    <button type="button" class="btn btn-icon  btn-danger  btn-size"  (click)="deleterecord(records['pk'])"><i class="fa fa-trash text-white"></i></button>
                                                </div>    
                                            </td>
                                            
                                        </tr>
                                        
                                    </tbody>
                        </table>
                        <pagination-controls (pageChange)="p = $event" *ngIf="data"></pagination-controls>
                          
                          <table id="example" class="table table-striped " cellspacing="0" width="1500px;" *ngIf="tableview['failmessage']">
                              <div class="no-table-record">
                                  No record found....
                              </div>
                          </table>
                </div>
            </div>    
        </div>    
    </div>
</div>


<!-- View City -->
<div class="modal fade show" id="viewRecordModal" tabindex="-1" role="dialog" >
    <div class="modal-dialog modal-md" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="example-Modal3">View User Details</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"> <span aria-hidden="true">×</span> </button>
            </div>
            
            <div class="modal-body" *ngIf="singlerecord">
                <div class="row">
                    <div class="col-lg-6">
                        <div class="form-group">
                            <label for="recipient-name" class="form-control-label"><strong>Full Name : </strong>{{singlerecord.first_name}} {{singlerecord.last_name}}</label>
                        </div>
                    </div> 
                    <div class="col-lg-6">
                        <div class="form-group">
                            <label for="recipient-name" class="form-control-label"><strong>Eamil : </strong>{{singlerecord.email}}</label>
                        </div>
                    </div> 
                     <div class="col-lg-6">
                        <div class="form-group">
                            <label for="recipient-name" class="form-control-label"><strong>Password : </strong>{{singlerecord.password}}</label>
                        </div>
                    </div> 
                     <div class="col-lg-6">
                        <div class="form-group">
                            <label for="recipient-name" class="form-control-label"><strong>Phone Number : </strong>{{singlerecord.phone_number}}</label>
                        </div>
                    </div> 
                    <div class="col-lg-6">
                        <div class="form-group">
                            <label for="recipient-name" class="form-control-label"><strong>Designation : </strong>{{singlerecord.designation}}</label>
                        </div>
                    </div> 
                     <div class="col-lg-6">
                        <div class="form-group">
                            <label for="recipient-name" class="form-control-label"><strong>Aadhar : </strong>{{singlerecord.aadhar_number}}</label>
                        </div>
                    </div> 
                     <div class="col-lg-6">
                        <div class="form-group">
                            <label for="recipient-name" class="form-control-label"><strong>Pan number : </strong>{{singlerecord.pan_number}}</label>
                        </div>
                    </div> 
                    
                    <div class="col-lg-6">
                        <div class="form-group">
                            <label for="recipient-name" class="form-control-label"><strong>Superuser : </strong>{{singlerecord.is_superuser}}</label>
                        </div>
                    </div>
                    <div class="col-lg-12">
                        <div class="form-group">
                            <label for="recipient-name" class="form-control-label"><strong>Date Of Joining : </strong>{{singlerecord.date_joined | date:'longDate'}}</label>
                        </div>
                    </div> 
                    <div class="seperate-line"></div>
                </div>   
            </div>
        </div>
    </div>
</div>



<!-- Edit Record -->
<div class="modal fade show" id="editRecordModal" tabindex="-1" role="dialog" >
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="example-Modal3">Edit Record</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"> <span aria-hidden="true">×</span> </button>
            </div>
            <form [formGroup]="update_record">    
                <div class="modal-body">
                   <div class="row">
                      <div class="col-lg-4">
                          <div class="form-group">
                            <label class="form-label"><strong>First Name</strong> <span class="required-star">*</span></label>
                            <input type="text" class="form-control" name="example-text-input" placeholder="First Name" formControlName="first_name">
                              <div *ngIf="(f.first_name.errors && f.first_name.touched) || (f.first_name.errors && submitted)" class="errorMsg">
                                  <div *ngIf="f.first_name.errors.required" >This field is required</div>
                              </div>
                          </div>
                      </div>

                      <div class="col-lg-4">
                          <div class="form-group">
                            <label class="form-label"><strong>Last Name</strong> <span class="required-star">*</span></label>
                            <input type="text" class="form-control" name="example-text-input" placeholder="Last Name" formControlName="last_name">
                              <div *ngIf="(f.last_name.errors && f.last_name.touched) || (f.last_name.errors && submitted)" class="errorMsg">
                                  <div *ngIf="f.last_name.errors.required" >This field is required</div>
                              </div>
                          </div>
                      </div>

                      <div class="col-lg-4">
                          <div class="form-group">
                            <label class="form-label"><strong>Email</strong> <span class="required-star">*</span></label>
                            <input type="text" class="form-control" name="example-text-input" placeholder="Email" formControlName="email">
                              <div *ngIf="(f.email.errors && f.email.touched) || (f.email.errors && submitted)" class="errorMsg">
                                  <div *ngIf="f.email.errors.required" >This field is required</div>
                                   <div [hidden]="!f.email.errors.patternInvalid" class="errorMsg">Please enter valid email.</div>
                              </div>
                          </div>
                      </div>

                      <div class="col-lg-4">
                          <div class="form-group">
                            <label class="form-label"><strong>Mobile Number</strong> <span class="required-star">*</span></label>
                            <input type="text" class="form-control" name="example-text-input" placeholder="Mobile Number" formControlName="phone_number">
                               <div *ngIf="(f.phone_number.errors && f.phone_number.touched) || (f.phone_number.errors && submitted)" class="errorMsg">
                                   <div *ngIf="f.phone_number.errors.required" >This field is required</div>
                                    <div [hidden]="!f.phone_number.errors.patternMobileInvalid">Mobile Number should be 10 digit</div>
                                </div>
                          </div>
                      </div>

                      <div class="col-lg-4">
                          <div class="form-group">
                            <label class="form-label"><strong>Aadhar Number</strong> <span class="required-star">*</span></label>
                            <input type="number" class="form-control" name="example-text-input" placeholder="Aadhar Number" formControlName="aadhar_number">
                               <div *ngIf="(f.aadhar_number.errors && f.aadhar_number.touched) || (f.aadhar_number.errors && submitted)" class="errorMsg">
                                   <div *ngIf="f.aadhar_number.errors.required" >This field is required</div>
                                    <div [hidden]="!f.aadhar_number.errors.patternAadharInvalid">Aadhar Number should be 12 digit</div>
                                </div>
                          </div>
                      </div>

                      <div class="col-lg-4">
                          <div class="form-group">
                            <label class="form-label"><strong>Pan Number</strong> <span class="required-star">*</span></label>
                            <input type="text" class="form-control" name="example-text-input" placeholder="Pan Number" formControlName="pan_number">
                               <div *ngIf="(f.pan_number.errors && f.pan_number.touched) || (f.pan_number.errors && submitted)" class="errorMsg">
                                   <div *ngIf="f.pan_number.errors.required" >This field is required</div>
                                    <div [hidden]="!f.pan_number.errors.patternPanInvalid">Pan Number should be 10 digit</div>
                                </div>
                          </div>
                      </div>

                      <div class="col-lg-4">
                          <div class="form-group">
                            <label class="form-label"><strong>Designation</strong> <span class="required-star">*</span></label>
                            <input type="text" class="form-control" name="example-text-input" placeholder="Designation" formControlName="designation">
                              <div *ngIf="(f.designation.errors && f.designation.touched) || (f.designation.errors && submitted)" class="errorMsg">
                                  <div *ngIf="f.designation.errors.required" >This field is required</div>
                              </div>
                          </div>
                      </div>

                      <div class="col-lg-4">
                          <div class="form-group">
                            <label class="form-label"><strong>Superuser</strong> <span class="required-star">*</span></label>
                            <select class="form-control" formControlName="is_superuser">
                              <!-- <option [attr.selected]="his_superuser==''" value="" disabled>--Select Superuser--</option> -->
                             <option value="true" >Yes</option> 
                             <option value="false">No</option> 
                            </select>
                           <div *ngIf="(f.is_superuser.errors && f.is_superuser.touched) || (f.is_superuser.errors && submitted)" class="errorMsg">
                                  <div *ngIf="f.is_superuser.errors.required" >This field is required</div>
                              </div>
                          </div>
                      </div>

                     
                      
                      <!-- <div class="col-lg-12">
                        <div class=" mt-5 mb-0"> 

                          <button *ngIf="!processingFlag" type="button" class="btn btn-primary" (click)="onSubmit()" ><i class="fa fa-plus"></i>&nbsp;Add User</button> 
                          <button *ngIf="processingFlag" type="button" class="btn btn-primary"  ><i class="fa fa-spinner fa-spin"></i> Processing...</button> 

                        </div>
                      </div> -->
                  </div>   
               </div>
                <div class="modal-footer">
                     
                    <button *ngIf="!processingFlag" type="button" class="btn btn-primary" (click)="onUpdate();">Update</button>

                    <button *ngIf="processingFlag" type="button" class="btn btn-primary" ><i class="fa fa-spinner fa-spin"></i> Processing...</button>
                </div>
            </form>    
        </div>
    </div>
</div>
